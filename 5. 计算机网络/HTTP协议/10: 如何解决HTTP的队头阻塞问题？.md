# 010：如何解决HTTP的队头阻塞问题？

## 什么是HTTP队头阻塞？

从前面的小结可以知道，HTTP传输是基于`请求-应答`的模式进行的，报文必须要一发一收，但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理，这既是著名的队头阻塞问题。

## 并发连接

对于一个域名允许分配多个长连接，那么相当于增加了任务队列，不至于一个队伍的任务阻塞其他所有任务。在RFC2616规定过客户端最多并发2个连接，不过事实上在现在的浏览器标准中，这个上限要多很多，Chrome中是6个。

但其实，即使是提高了并发连接，还是不能满足人们对性能的需求。

## 域名分片

一个域名不是可以并发6个长连接吗？那我就多分几个域名。

比如content1.wuyi.com \content2.wuyi.com

这样一个`wuyi.com`域名下可以分出非常多的二级域名，而他们都指向相同的一台服务器，能够并发的长连接数就更多了，事实上也更好地解决了队头阻塞问题。
